<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.vikinc.community.mapper.CommentMapper">

    <resultMap id="comment" type="org.vikinc.community.dto.Comment">
        <result property="id" column="id"/>
        <result property="parentId" column="parent_id"/>
        <result property="type" column="type"/>
        <result property="commentator" column="commentator"/>
        <result property="content" column="content"/>
        <result property="gmtCreate" column="gmt_create"/>
        <result property="gmtModified" column="gmt_modified"/>
        <result property="likeCount" column="like_count"/>
    </resultMap>

    <insert id="insert" parameterType="org.vikinc.community.dto.Comment">
        INSERT INTO comment (parent_id,type,commentator,content,gmt_create,gmt_modified,like_count)
         value (#{parentId},#{type},#{commentator},#{content},#{gmtCreate},#{gmtModified},#{likeCount})
    </insert>

    <select id="getCommentByID">
        SELECT * FROM comment WHERE parent_id = #{parentId} AND commentator = #{commentator}
    </select>

    <select id="getCommentListByID" resultMap="comment">
        SELECT * FROM comment WHERE parent_id = #{parentId}
    </select>

    <select id="getCommentListByIDDESC" resultMap="comment">
        SELECT * FROM comment WHERE parent_id = #{parentId} ORDER BY gmt_create DESC
    </select>
</mapper>
